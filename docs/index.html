<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Home | westures</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/tui-doc.css">

    
        
            <link type="text/css" rel="stylesheet" href="styles/custom.css">
        
    
</head>
<body>
<nav class="lnb" id="lnb">
    <div class="logo" style="">
        
            <img src="img/toast-ui.png" width="100%" height="100%">
        
    </div>
    <div class="title">
        <h1><a href="index.html" class="link">westures</a></h1>
        
            <span class="version">v0.5.4</span>
        
    </div>
    <div class="search-container" id="search-container">
        <input type="text" placeholder="Search">
        <ul></ul>
    </div>
    
    <div class="lnb-api hidden"><h3>Classes</h3><ul><li><a href="westures.Gesture.html">Gesture</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="westures.Gesture_sub"></div></li><li><a href="westures.Pan.html">Pan</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="westures.Pan_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="westures.Pan.html#move">move</a></li></ul></div></li><li><a href="westures.Pinch.html">Pinch</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="westures.Pinch_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="westures.Pinch.html#move">move</a></li></ul></div></li><li><a href="westures.Point2D.html">Point2D</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="westures.Point2D_sub"></div></li><li><a href="westures.Region.html">Region</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="westures.Region_sub"></div></li><li><a href="westures.Rotate.html">Rotate</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="westures.Rotate_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="westures.Rotate.html#move">move</a></li></ul></div></li><li><a href="westures.Swipe.html">Swipe</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="westures.Swipe_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="westures.Swipe.html#saved">saved</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="westures.Swipe.html#cancel">cancel</a></li><li><a href="westures.Swipe.html#emitSaved">emitSaved</a></li><li><a href="westures.Swipe.html#end">end</a></li></ul></div></li><li><a href="westures.Swivel.html">Swivel</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="westures.Swivel_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="westures.Swivel.html#cancel">cancel</a></li><li><a href="westures.Swivel.html#end">end</a></li><li><a href="westures.Swivel.html#move">move</a></li><li><a href="westures.Swivel.html#refresh">refresh</a></li></ul></div></li><li><a href="westures.Tap.html">Tap</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="westures.Tap_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="westures.Tap.html#end">end</a></li></ul></div></li><li><a href="westures.Track.html">Track</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="westures.Track_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="westures.Track.html#cancel">cancel</a></li><li><a href="westures.Track.html#end">end</a></li><li><a href="westures.Track.html#move">move</a></li><li><a href="westures.Track.html#start">start</a></li></ul></div></li></ul></div><div class="lnb-api hidden"><h3>Namespaces</h3><ul><li><a href="ReturnTypes.html">ReturnTypes</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ReturnTypes_sub"><div class="member-type">Typedef</div><ul class="inner"><li><a href="ReturnTypes.html#.BaseData">BaseData</a></li><li><a href="ReturnTypes.html#.PanData">PanData</a></li><li><a href="ReturnTypes.html#.PinchData">PinchData</a></li><li><a href="ReturnTypes.html#.RotateData">RotateData</a></li><li><a href="ReturnTypes.html#.SwipeData">SwipeData</a></li><li><a href="ReturnTypes.html#.SwivelData">SwivelData</a></li><li><a href="ReturnTypes.html#.TapData">TapData</a></li><li><a href="ReturnTypes.html#.TrackData">TrackData</a></li></ul></div></li><li><a href="westures.html">westures</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="westures_sub"></div></li></ul></div>
</nav>
<div id="resizer"></div>

<div class="main" id="main">
    



    









    


    <section>
        <article class="readme"><h1 id="westures">westures</h1>
<p><a href="https://codeclimate.com/github/mvanderkamp/westures/maintainability"><img src="https://api.codeclimate.com/v1/badges/fc7d7ace5a3018dc4071/maintainability" alt="Maintainability">
</a></p>
<p>Westures is intended to be a lightweight JavaScript gesture detection library.
Whether it achieves that goal at this point is... yet to be determined.</p>
<p>This module includes
<a href="https://mvanderkamp.github.io/westures-core/">westures-core</a> as well as a base
set of gestures.</p>
<p>Visit this page for an example of the system in action: <a href="https://mvanderkamp.github.io/westures-example/">Westures Example</a>. Note that this is best viewed
on a touch device.</p>
<p>Westures is a fork of <a href="https://github.com/zingchart/zingtouch">ZingTouch</a>.</p>
<h2 id="advisory">Advisory</h2>
<p>This is an alpha release of this project. It is very much still in development,
and has not been tested beyond a handful of devices using the latest versions of
Chrome and Firefox. If you find a problem with it, please let me know.</p>
<p>That said, please do give it a try, and if something breaks, please let me know!
Or, even better, figure out why it broke, figure out a solution, and submit a
pull request!</p>
<h2 id="table-of-contents">Table of Contents</h2>
<p><strong>NOTE:</strong> <em>This readme is still under construction!</em></p>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#basic-usage">Basic Usage</a></li>
<li><a href="#implementing-custom-gestures">Implementing Custom Gestures</a></li>
<li><a href="#changes-from-zingtouch">What's Changed</a></li>
<li><a href="#links">Links</a></li>
</ul>
<h2 id="overview">Overview</h2>
<p>There are seven gestures defined in this module:</p>
<ul>
<li><em>Tap:</em> Single or multi-finger taps.</li>
<li><em>Pinch:</em> Two or more fingers move together or apart.</li>
<li><em>Pan:</em> One or more fingers sliding around the screen.</li>
<li><em>Rotate:</em> Two fingers or more fingers rotating around each other.</li>
<li><em>Swipe:</em> Single finger sliding very quickly across the screen.</li>
<li><em>Swivel:</em> Single finger rotating around a fixed pivot point.</li>
<li><em>Track:</em> Track the contact points of all active pointers.</li>
</ul>
<p>See the <a href="https://mvanderkamp.github.io/westures/">documentation</a> for more
information about each gesture.</p>
<p>Note that all x,y positions are obtained from the corresponding <code>clientX</code> and
<code>clientY</code> properties of the input event.</p>
<h2 id="basic-usage">Basic Usage</h2>
<h3 id="importing-the-module">Importing the module</h3>
<pre class="prettyprint source lang-javascript"><code>const wes = require('westures');</code></pre><h3 id="declaring-a-region">Declaring a Region</h3>
<p>First, decide what region should listen for events. If you want elements to
continue to respond to input events from the <code>move</code> and <code>end</code> phases even if the
pointer moves outside the element, you should use a region that contains the
element. This can even be the window object if you want these events to fire
event if the pointer goes outside the browser window.</p>
<p>For example:</p>
<pre class="prettyprint source lang-javascript"><code>const region = new wes.Region(window);</code></pre><p>Of course, if you have lots of interactable elements on your page, you may want
to consider using smaller elements as regions, or event the interactable element
itself. Test it out in any case, and see what works better for you.</p>
<p>For example, if you have a canvas element with id <code>draw-struff</code> that you want to
interact with, you could do:</p>
<pre class="prettyprint source lang-javascript"><code>const region = new wes.Region(document.querySelector('#draw-stuff'));</code></pre><h3 id="binding-an-element-within-a-region">Binding an element within a Region</h3>
<p>When you add a gesture to a region, you need to provide a handler as well as an
Element along with the gesture. The gesture will only be recognized when the
first pointer to interact with the region was inside the given Element.
Therefore unless you want to try something fancy the gesture element should
probably be contained inside the region element. It could even be the region
element.</p>
<p>Now for an example. Suppose you have a div (id 'pannable') within which you want
to detect a Pan gesture (assume that such a gesture is available). Your handler
is called <code>panner</code>.</p>
<pre class="prettyprint source lang-javascript"><code>region.addGesture(document.querySelector('#pannable'), new Pan(), panner);</code></pre><p>The <code>panner</code> function will now be called whenever a Pan hook returns non-null
data. The data returned by the hook will be available inside <code>panner</code> as such:</p>
<pre class="prettyprint source lang-javascript"><code>function panner(data) {
  // data.x ...
  // data.y ...
  // and so on, depending on the Gesture
}</code></pre><h2 id="implementing-custom-gestures">Implementing Custom Gestures</h2>
<p>The core technique used by Westures (originally conceived for ZingTouch) is to
process all user inputs and filter them through three key lifecycle phases:
<code>start</code>, <code>move</code>, and <code>end</code>. Gestures are defined by how they respond to these
phases.  To respond to the phases, a gesture extends the <code>Gesture</code> class
provided by this module and overrides the method (a.k.a. &quot;hook&quot;) corresponding
to the name of the phase. </p>
<p>The hook, when called, will receive the current State object of the region. To
maintain responsiveness, the functionality within a hook should be short and as
efficient as possible.</p>
<p>For example, a simple way to implement a 'Tap' gesture would be as follows:</p>
<pre class="prettyprint source lang-javascript"><code>const { Gesture } = require('westures');

class Tap extends Gesture {
  constructor() {
    super('tap');
  }

  end(state) {
    const {x,y} = state.getInputsInPhase('end')[0].current.point;
    return {x,y};
  }
}</code></pre><p>There are problems with this example, so I don't recommend using it as an actual
Tap gesture, but it gives you the basic idea.</p>
<p>The default hooks for all Gestures simply return null. Data will only be
forwarded to bound handlers when a non-null value is returned by a hook.</p>
<p>For information about what data is accessible via the State object, see the full
documentation <a href="https://mvanderkamp.github.io/westures-core/State.html">here</a>.
Note that his documentation was generated with <code>jsdoc</code>.</p>
<h3 id="storing-the-progress-of-a-gesture">Storing the &quot;progress&quot; of a Gesture</h3>
<p>One of the key facilities made available via the <code>state</code> object that a hook
receives is the ability to store intermediate progress on a per-gesture and
per-input basis. This is done via the <code>getProgressOfGesture</code> method on any given
input. </p>
<p>Here is a simple Pan example, where we keep track of what data was last emitted
using this progress capability.</p>
<pre class="prettyprint source lang-javascript"><code>const { Gesture } = require('westures');

class Pan extends Gesture {
  constructor() {
    super('pan');
  }

  start(state) {
    const progress = state.active[0].getProgressOfGesture(this.id);
    progress.lastEmit = state.centroid;
  }

  move(state) {
    const progress = state.active[0].getProgressOfGesture(this.id);
    const change = state.centroid.minus(progress.lastEmit);
    progress.lastEmit = state.centroid;
    return {
      change,
      centroid: state.centroid,
    };
  }

  end(state) {
    const progress = state.active[0].getProgressOfGesture(this.id);
    progress.lastEmit = state.centroid;
  }
}</code></pre><p>In fact, this example is very close to the Pan implementation that is included
in the <code>westures</code> module.</p>
<h3 id="data-passed-to-handlers">Data Passed to Handlers</h3>
<p>As you can see from above, it is the gesture which decides when data gets passed
to handlers, and for the most part what that data will be. Note though that a
few propertiess will get added to the outgoing data object before the handler is
called. Those properties are:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>event</td>
<td>Event</td>
<td>The input event which caused the gesture to be recognized</td>
</tr>
<tr>
<td>phase</td>
<td>String</td>
<td>'start', 'move', or 'end'</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td>The name of the gesture as specified by its designer.</td>
</tr>
<tr>
<td>target</td>
<td>Element</td>
<td>The Element that is associated with the recognized gesture.</td>
</tr>
</tbody>
</table>
<h2 id="changes-from-zingtouch">Changes From ZingTouch</h2>
<p>The fundamental idea of ZingTouch, the three-phase hook structure, remains more
or less the same. Most of the changes have to do with streamlining and
simplifying the code such that it is easier to use and has a wider range of
capabilities. The most significant of these is full simultaneous multi-touch
gesture support. Beyond that, here are some spefic changes:</p>
<ul>
<li>Reorganized and simplified code structure.<ul>
<li>The arbiter-interpreter-dispatcher scheme has been significantly simplified.<ul>
<li>There is no arbiter. instead the Region class has an 'arbitrate' function.</li>
<li>There is no interpreter. Instead the Binding class has an 'evaluateHook'
function.</li>
<li>There is no dispatcher. The handlers are called directly.</li>
</ul>
</li>
<li>Fewer levels of code and fewer attempts to ram multiple types of
functionality into a single function. I've tried to keep all functions clear
and simple.</li>
</ul>
</li>
<li>Creation and use of a Point2D class.</li>
<li>Redesigned technique for handling inputs allows continuous use of touches.
ZingTouch had a tendency to stop responding to touches if some gesture ended,
this should no longer be the case. Users should now be able to seamlessly flow
from one gesture to another (or even multiple simultaneously) without having
to restart their touches.</li>
<li>Support for using the window object as a region.</li>
<li>Simplified hook interaction. A single 'state' object is passed, as that is
all that is really needed.</li>
<li>Simplified handler interaction. As the handlers are called directly instead of
as the callback for an event, the parameters do not need to be wrapped up
inside the 'details' property of an event object.</li>
<li>Renamed 'bind' to 'addGesture' and 'unbind' to 'removeGestures'.</li>
</ul>
<h2 id="links">Links</h2>
<h3 id="westures">westures</h3>
<ul>
<li><a href="https://www.npmjs.com/package/westures">npm</a></li>
<li><a href="https://github.com/mvanderkamp/westures">github</a></li>
<li><a href="https://mvanderkamp.github.io/westures/">documentation</a></li>
</ul>
<h3 id="westures-core">westures-core</h3>
<ul>
<li><a href="https://www.npmjs.com/package/westures-core">npm</a></li>
<li><a href="https://github.com/mvanderkamp/westures-core">github</a></li>
<li><a href="https://mvanderkamp.github.io/westures-core/">documentation</a></li>
</ul></article>
    </section>






</div>

<footer>
    <img class="logo" src="img/toast-ui.png" style="">
    <div class="footer-text">Westures: Simultaneous Multitouch Gestures</div>
</footer>
<script>prettyPrint();</script>
<script src="scripts/jquery.min.js"></script>
<script src="scripts/tui-doc.js"></script>
<script src="scripts/linenumber.js"></script>

    <script>
        var id = 'package:westures_sub'.replace(/"/g, '_');
        var selectedApi = document.getElementById(id); // do not use jquery selector
        var $selectedApi = $(selectedApi);

        $selectedApi.removeClass('hidden');
        $selectedApi.parent().find('.glyphicon').removeClass('glyphicon-plus').addClass('glyphicon-minus');
        showLnbApi();
    </script>

</body>
</html>